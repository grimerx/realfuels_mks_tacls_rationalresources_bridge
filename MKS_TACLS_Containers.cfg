// MKS_TACLS_Containers.cfg
// Adds TAC Life Support resources to MKS Kontainers
// Allows containers to store Food, Water, and Oxygen for life support
// Author: Auto-generated integration patch
// Last Updated: December 2025

@PART[*]:HAS[@MODULE[USIAnimation]]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    // MKS Kontainers with USIAnimation module
    RESOURCE
    {
        name = Food
        amount = 0
        maxAmount = 100
    }
    RESOURCE
    {
        name = Water
        amount = 0
        maxAmount = 100
    }
    RESOURCE
    {
        name = Oxygen
        amount = 0
        maxAmount = 100
    }
}

// Enhanced food/water/oxygen for larger Tundra modules
@PART[*]:HAS[@MODULE[USIAnimation]:HAS[#animationName = Expand*]]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    @RESOURCE[Food]
    {
        @maxAmount *= 2.5
    }
    @RESOURCE[Water]
    {
        @maxAmount *= 2.5
    }
    @RESOURCE[Oxygen]
    {
        @maxAmount *= 2.5
    }
}

// MKS Container Part-Specific Patches
// Kontainer (0.9375m stackable)
@PART[KIS_Container_Cube]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    @RESOURCE[Food]
    {
        @maxAmount = 50
    }
    @RESOURCE[Water]
    {
        @maxAmount = 50
    }
    @RESOURCE[Oxygen]
    {
        @maxAmount = 50
    }
}

// Small Kontainer
@PART[SM-25-1]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 75
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 75
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 75
    }
}

// Medium Kontainer
@PART[SM-25-2]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 150
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 150
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 150
    }
}

// Large Kontainer
@PART[SM-25-3]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 300
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 300
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 300
    }
}

// Tundra Hab - Primary habitation module
@PART[Tundra-Hab]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 500
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 500
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 500
    }
}

// Tundra Lab
@PART[Tundra-Lab]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 300
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 300
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 300
    }
}

// Tundra Storage
@PART[Tundra-Storage]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS]:FOR[zzz_MKS_TACLS_Integration]
{
    +RESOURCE[Food]
    {
        name = Food
        amount = 0
        maxAmount = 400
    }
    +RESOURCE[Water]
    {
        name = Water
        amount = 0
        maxAmount = 400
    }
    +RESOURCE[Oxygen]
    {
        name = Oxygen
        amount = 0
        maxAmount = 400
    }
}

// Enable B9 Part Switch support if available
@PART[*]:HAS[@MODULE[ModuleB9PartSwitch]]:NEEDS[TACLifeSupport,UmbraSpaceIndustries/MKS,B9PartSwitch]:FOR[zzz_MKS_TACLS_Integration]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
    {
        SUBTYPE
        {
            name = TAC_LS_Storage
            title = TAC-LS Supplies
            descriptionDetail = Stores Food, Water, and Oxygen for life support
            defaultSubtypeName = TAC-LS Storage
        }
    }
}
